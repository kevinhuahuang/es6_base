<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        // 实现属性的链式操作（将属性的读取转换为执行一个函数）
        var pipe = (function () {
            return function (value) {
                var funcStack = [];
                var oproxy = new Proxy({} , {
                    get : function (pipeObject, fnName) {
                        if (fnName === 'get') {
                            return funcStack.reduce(function (val, fn) {
                                return fn(val);
                            },value);
                        }
                        funcStack.push(window[fnName]); // window浏览器的全局对象
                        return oproxy;
                    }
                });

                return oproxy;
            }
        }());

        var double = n => n * 2;
        var pow    = n => n * n;
        var reverseInt = n => n.toString().split("").reverse().join("") | 0;

        function getGetValue () {
            let value = pipe(3).double.pow.reverseInt.get; // 63
            document.getElementById('display').value = value
        }
        //==============================================================
        // 实现生成各种DOM节点的能用函数
        const dom = new Proxy({}, {
            get(target, property) {
                return function(attrs = {}, ...children) {
                    const el = document.createElement(property)
                    for (let prop of Object.keys(attrs)) {
                        el.setAttribute(prop, attrs[prop])
                    }
                    for (let child of children) {
                        if (typeof child === 'string') {
                            child = document.createTextNode(child)
                        }
                        el.appendChild(child)
                    }
                    return el
                }
            }
        })

        const el = dom.div({},
            'Hello, my name is',
            dom.a({href:  '//example.com'}, 'Mark'),
            '. I like:',
            dom.ul({},
                dom.li({}, 'The web'),
                dom.li({}, 'Food'),
                dom.li({}, '...actually that\'s it')))


        function action () {
            document.body.appendChild(el)
        }
    </script>
</head>
<body>
    <input type="text" id="display">
    <button onclick="getGetValue()">实现属性的链式操作</button>
    <button onclick="action()">实现一个生成各种DOM节点的通用函数dom</button>
</body>
</html>